# モニタリングとロギング演習

## 目的

この演習では、法務AIアプリケーションのモニタリングとロギングシステムを構築し、運用状況の可視化、異常検知、パフォーマンス分析を行う方法を学びます。Prometheus、Grafana、ELKスタック（Elasticsearch、Logstash、Kibana）などのツールを活用して、実践的なモニタリング環境を構築することを目的としています。

## 準備

1. 以下のツールをインストールまたはDockerで準備してください
   - Prometheus
   - Grafana
   - Elasticsearch
   - Kibana
   - Fluentd または Logstash

2. 前回の演習で作成したDockerコンテナ化されたアプリケーションを用意してください

## 課題

### 基本課題：モニタリングシステムの構築

1. Prometheusの設定
   - アプリケーションのメトリクスエンドポイントを設定
   - システムメトリクス（CPU、メモリ、ディスク使用率など）の収集設定
   - アラートルールの定義（リソース使用率、エラー率、レスポンスタイムなど）

2. Grafanaダッシュボードの作成
   - システムリソースダッシュボード
   - アプリケーションパフォーマンスダッシュボード
   - ビジネスメトリクスダッシュボード（契約書処理数、AI API呼び出し数など）
   - アラート通知の設定

3. ロギングシステムの構築
   - Fluentd/Logstashの設定
   - アプリケーションログの収集と構造化
   - Elasticsearchへのデータ送信
   - Kibanaでのログ可視化とダッシュボード作成

### 発展課題：高度なモニタリングと分析

1. 以下の機能を実装してください
   - 異常検知アルゴリズムの実装（統計的手法またはAIベース）
   - ユーザー行動分析ダッシュボード
   - パフォーマンスボトルネック自動検出
   - 分散トレーシングの実装（Jaeger/Zipkinなど）

2. 以下の運用自動化を実装してください
   - 自動スケーリングのためのメトリクス連携
   - インシデント対応の自動化（ChatOpsとの連携）
   - 定期的なパフォーマンスレポート生成
   - 予測分析（将来のリソース需要予測）

### 評価ポイント

- モニタリングとロギングの包括性
- ダッシュボードの視認性と有用性
- アラートの適切な設定（誤検知の少なさ）
- パフォーマンス分析の深さ
- 運用効率化への貢献度

## 提出物

1. 以下のコンポーネントを含むDockerコンポーズ設定を作成してください
   - アプリケーション
   - Prometheus
   - Grafana
   - Elasticsearch
   - Kibana
   - Fluentd/Logstash
   - （オプション）Alertmanager

2. 以下の設定ファイルを提出してください
   - Prometheusの設定ファイル
   - アラートルール定義
   - Grafanaダッシュボード定義（JSON）
   - Fluentd/Logstashの設定ファイル
   - Kibanaダッシュボード定義

3. 以下の内容を含むレポートを作成してください（800〜1,200字程度）：
   - モニタリングアーキテクチャの設計と実装方法
   - 重要なメトリクスとその閾値の選定理由
   - ログ分析から得られた知見
   - 異常検知の手法と効果
   - 実務での活用シナリオと期待される効果

4. モニタリングシステムのデモンストレーション動画（3分程度）を作成してください
   - ダッシュボードの説明
   - アラート発生時のワークフロー
   - ログ検索と分析の実演
   - パフォーマンス問題の特定と解決プロセス

提出方法：研修用ポータルサイトの課題提出ページからDockerコンポーズファイル、設定ファイル、レポート、デモ動画をアップロードしてください。 