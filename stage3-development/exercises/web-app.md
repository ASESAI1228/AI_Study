# Webアプリケーション開発演習

## 目的

この演習では、Streamlitを使用して法務業務に役立つWebアプリケーションを開発する方法を学びます。データベース連携、データ可視化、AI API連携などの実践的なスキルを習得することを目的としています。

## 準備

1. 必要なライブラリをインストールしてください
   ```
   pip install streamlit pandas matplotlib plotly psycopg2-binary python-dotenv openai
   ```

2. 前回の演習で作成したデータベースを使用します。データベースが準備されていない場合は、`database_operations.py`を実行してサンプルデータベースを作成してください。

3. `.env`ファイルに必要な環境変数を設定してください
   ```
   # PostgreSQL接続情報
   PG_HOST=localhost
   PG_DATABASE=legal_db
   PG_USER=postgres
   PG_PASSWORD=your_password

   # OpenAI API
   OPENAI_API_KEY=your_openai_api_key
   ```

## 演習1：基本的なStreamlitアプリケーション

### 課題1-1：アプリケーションの基本構造

`code-examples/streamlit_app.py`を参照し、以下の課題に取り組んでください：

1. 以下の機能を持つ基本的なStreamlitアプリケーションを作成してください：
   - タイトルとヘッダー
   - サイドバーメニュー
   - 複数のページ（画面）の切り替え

2. 各ページに適切なUI要素（テキスト入力、セレクトボックス、ボタンなど）を配置してください

3. レイアウトを整えるために、カラムやタブなどを活用してください

### 課題1-2：データ表示コンポーネント

1. サンプルデータを作成し、以下の方法で表示するプログラムを実装してください：
   - データフレームの表示（st.dataframe）
   - 静的テーブルの表示（st.table）
   - 基本的なグラフの表示（st.bar_chart, st.line_chart）

2. Matplotlibを使用して、カスタマイズしたグラフを作成・表示するプログラムを実装してください

3. インタラクティブな要素（フィルタリング、ソートなど）を追加してください

## 演習2：データベース連携

### 課題2-1：データベースからのデータ取得と表示

1. PostgreSQLデータベースに接続し、契約書データを取得して表示するプログラムを実装してください

2. 取得したデータを整形して表示してください（日付フォーマットの変更など）

3. st.cache_dataデコレータを使用して、データ取得を最適化してください

### 課題2-2：データの登録と更新

1. 契約書を登録するフォームを作成し、データベースに保存する機能を実装してください

2. 既存の契約書を更新するフォームを作成してください

3. データの入力検証（バリデーション）を実装してください

4. 操作成功時・失敗時の適切なフィードバックを表示してください

## 演習3：データ可視化

### 課題3-1：基本的なグラフ作成

1. 契約書データを分析し、以下のグラフを作成してください：
   - 契約書タイプ別の件数（棒グラフ）
   - 月別の契約書数の推移（折れ線グラフ）
   - ステータス別の契約書数（円グラフ）

2. グラフにタイトル、軸ラベル、凡例などを適切に設定してください

3. グラフの見た目をカスタマイズしてください（色、サイズ、フォントなど）

### 課題3-2：インタラクティブな可視化

1. Plotlyを使用して、インタラクティブなグラフを作成してください

2. ユーザーが選択した条件に基づいて、グラフをリアルタイムで更新する機能を実装してください

3. 複数のグラフを連動させて、データの関連性を視覚化してください

## 演習4：AI API連携

### 課題4-1：契約書分析機能

1. OpenAI APIを使用して、契約書を分析する機能を実装してください

2. 以下の分析を行えるようにしてください：
   - 契約書の要約
   - 重要条項の抽出
   - リスク分析
   - 改善提案

3. 分析結果を見やすく整形して表示してください

### 課題4-2：高度なAI機能

1. 以下のいずれかの高度なAI機能を実装してください：
   - 契約書の自動生成
   - 契約書の比較分析
   - 法的質問応答システム
   - 契約書のリスクスコアリング

2. ユーザーが入力パラメータを調整できるようにしてください

3. 処理中の状態表示（st.spinner）や進捗バー（st.progress）を活用してください

## 演習5：デプロイメント

### 課題5-1：ローカル環境での実行と最適化

1. アプリケーションをローカル環境で実行し、パフォーマンスを最適化してください

2. メモリ使用量やロード時間を改善するための工夫を実装してください

3. エラーハンドリングを強化し、アプリケーションの安定性を向上させてください

### 課題5-2：デプロイ準備

1. アプリケーションをデプロイするための準備を行ってください：
   - requirements.txtの作成
   - 環境変数の管理方法の検討
   - セキュリティ対策の実装

2. デプロイ手順書を作成してください

## 提出課題

以上の演習を通じて学んだことを活かして、以下の課題に取り組んでください：

1. 法務業務に役立つStreamlitアプリケーションを開発してください
   - データベース連携
   - データ可視化
   - AI API連携
   - ユーザーフレンドリーなUI/UX

2. 以下の機能を含めてください：
   - 契約書の登録、検索、更新、削除
   - 契約書データの分析と可視化
   - AI支援による契約書分析
   - レポート生成と出力

3. 以下の内容を含むレポートを作成してください（800〜1,200字程度）：
   - アプリケーションの目的と機能概要
   - 設計上の工夫点
   - 実装における技術的なポイント
   - 実務での活用シナリオ
   - 今後の改善点

4. アプリケーションのデモンストレーション動画（3分程度）を作成してください

提出方法：研修用ポータルサイトの課題提出ページからソースコード、レポート、デモ動画をアップロードしてください。 